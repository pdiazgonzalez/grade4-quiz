
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>4 Unit 1 Literature Common Assessment</title>
  <style>
    body { font-family: Verdana, sans-serif; line-height: 1.6; margin: 40px; font-size: 1.8em; }
    h1, h2, h3 { text-align: center; }
    .container { max-width: 1200px; margin: auto; }
    .question { margin-bottom: 20px; }
    .correct { background-color: #d4edda; }
    .incorrect { background-color: #f8d7da; }
    .feedback { font-weight: bold; margin-top: 5px; }
    input[type="checkbox"] { transform: scale(2.5); margin: 10px; background-color: blue; }
    input[type="radio"] { transform: scale(2.5); margin: 10px; background-color: blue; }
    button[type="submit"] {
      width: 350px; height: 80px; padding: 10px 20px;
      background-color: #4CAF50; color: white; font-size: 1.5em; margin: 30px;
    }
    #teacherName {
      width: 280px; height: 60px; padding: 8px; border: 1px solid #ccc; border-radius: 4px;
      font-family: Georgia, serif; font-size: 24px; color: #333; background-color: #fcfc03;
    }
    hr.rounded { border-top: 15px solid #bbb; border-radius: 5px; }
    .unanswered { border: 2px solid red; background-color: #ffe6e6; padding: 8px; border-radius: 5px; }
  </style>
</head>
<body>

<div class="container">
  <h1>Grade 4 Unit 1 Literature Common Assessment</h1>

  <h4 style="font-size: 20px">Standards</h4>
  <p style="text-align: left; font-size: 16px;"><strong>RL.4.1:</strong> Refer to details and examples in a text when explaining what the text says explicitly and when drawing inferences from the text.</p>
  <p style="text-align: left; font-size: 16px;"><strong>RL.4.2:</strong> Determine the theme of a story, drama, or poem from details in the text; summarize the text.</p>
  <p style="text-align: left; font-size: 16px;"><strong>RL.4.4:</strong> Determine the meaning of words and phrases as they are used in a text, including those that allude to significant characters found in mythology, Tall Tales and Fables.</p>
  <p style="text-align: left; font-size: 16px;"><strong>L.4.2:</strong> Demonstrate command of the conventions of standard English capitalization, punctuation, and spelling when writing.</p>

  <h2>Directions</h2>
  <p>Read the text and answer the questions below.</p>

  <h2>Adapted from Mom for City Council (Raz-Kids)</h2>
  <p style="text-align: center"><strong>Written By: Jessica Malardy</strong></p>

  <img src="https://github.com/pdiazgonzalez/grade4-quiz/blob/main/Mom_City_Council.png?raw=true" alt="Mom for City Council" style="display: block; margin: auto; width: 33%;">

  <p><strong>1.</strong> It all began one afternoon at the Springfield Firehouse, where my mom works. “How can we do our jobs when the roads are so bad?” Sergeant Goodman grumbled.</p>
  <p><strong>2.</strong> “You try talking to the city council,” Chief McConnell replied. “They say there’s no money in the budget for fixing the roads.”</p>
  <p><strong>3.</strong> “Then the budget needs to change!” my mom declared. “I’m tired of our concerns being ignored or put off until later. Folks in this town rely on the fire department for help. We need a bridge over the river to help with traffic, and we need to fix the roads.”</p>
  <p><strong>4.</strong> That’s when I looked up from my homework and decided to jump in. “Mom,” I said, “you always tell me that instead of complaining about things, I should think about how to change them. How can you change these things?”</p>
  <p><strong>5.</strong> My mom shook her head and sighed, “My job is to put out fires, Jasmine, not fix the roads.” I looked down and read quietly to myself from my social studies textbook:</p>
  <p><strong>6.</strong> <em>At the local level, communities are governed by city councils. City councils make laws, plan major projects, and work to improve their communities. City council members are elected by local citizens to represent them and their needs.</em></p>
  <p><strong>7.</strong> Suddenly, I had an idea. “What if you were on the city council, Mom?” I exclaimed.</p>
  <p><strong>8.</strong> My mom laughed, but Chief McConnell rubbed his chin thoughtfully. “You know, she’s right. We could use a voice like yours in there, Kyla,” he said. “Passing laws, promoting safety, prioritizing the people’s needs.”</p>
  <p><strong>9.</strong> My mom looked thoughtful. “I’ve never really thought about it,” she admitted. “Think about it now,” Chief McConnell said, arching an eyebrow.</p>
  <p><strong>10.</strong> A few weeks later, my mom and I took a trip down to Springfield’s city hall. We asked the election official what Mom needed to do to run for city council.</p>
  <p><strong>11.</strong> First, the official asked us where we lived. “You see, Springfield is made up of ten districts,” she explained. “Each district is represented by one city council member.” She pointed to a map: our district, Ward 6, was in the western part of the city, near the river. “In order to run for your local seat, first you need to get your name on the official ballot.” </p>
  <p><strong>12.</strong> To do that, my mom and I had to gather one hundred signatures from people who lived in Ward 6 before the end of the month! Luckily, my mom’s firehouse is in our district, so she had plenty of local support. We talked to librarians, teachers, and police officers as well as doctors and nurses at the community hospital. They all signed, and so did my mom’s fire company and our friends, family, and neighbors. In two weeks, we had over a hundred signatures, so we took them back to city hall. The next day, the newspaper ran a small article, “Local Firefighter Kyla Walker Running for Ward 6 Seat.” The race was on!</p>
  <p><strong>13.</strong> “Now what?” I asked my mom. “Now we knock on doors,” she said. ”It’s called <b><u>canvassing</u></b>, and it’s the best way to meet voters and learn what’s important to them. Hopefully, they’ll get to know me, too, and will decide to vote for me,” Mom explained.</p>
  <p><strong>14.</strong> Some people were helpful and some people just shut their doors on us. Sometimes people were surprised to find a ten-year-old on their doorstep. I tried to use that to my advantage. “I used to think politics was just for grown-ups,” I explained. “Now that I’m getting to know my community, I can see that politics touches everybody’s life. Everyone cares about something that a city council member can help with. That’s why it matters to elect someone who cares, too—like my mom, Kyla Walker.”</p>
  <p><strong>15.</strong> <b><u>Canvassing</u></b> worked! Many folks grew excited that my mom was running. They liked her goals: repairing our roads, creating new jobs, and funding our schools. Some supporters were so enthusiastic that they decided to volunteer with our campaign, and suddenly we had a whole team to help us. They went <b><u>canvassing</u></b>, too, working to convince our community that my mom would be the best representative.</p>
  <p><strong>16.</strong> At last, after three months, election night arrived. My mom told me, “Remember, Jasmine, no matter what happens, we’ve already won. We tried our hardest, and we’ve brought our community together. That’s no small thing.” I nodded, but my stomach felt like it was full of butterflies. I knew my mom was right, but I still really wanted her to win.</p>
  <p><strong>17.</strong> Finally, the news anchor cleared her throat, and the room went silent. “It’s been a tight city council race in Ward 6 between current representative Frank LaValle and challenger Kyla Walker,” the anchor said. “The final ballots are in, and the winner is . . .” The butterflies in my stomach went wild. “Kyla Walker!”</p>

  <h2>Questions</h2>

  <!-- onsubmit removed; JS handles submission -->
  <form id="quizForm">
    <!-- 1a -->
    <div class="question" data-answer="b" data-type="radio" data-name="q1a">
      <p><strong>1a. From these themes, which one do you think is the <u>best</u> represented in this text? (RL.4.2)</strong></p>
      <label for="q1a_a"><input type="radio" name="q1a" value="a" id="q1a_a"> a) You should always be honest.</label><br>
      <label for="q1a_b"><input type="radio" name="q1a" value="b" id="q1a_b"> b) You can work together to make a change in your community.</label><br>
      <label for="q1a_c"><input type="radio" name="q1a" value="c" id="q1a_c"> c) You can always make friends with anyone.</label><br>
      <label for="q1a_d"><input type="radio" name="q1a" value="d" id="q1a_d"> d) Kids can make a difference.</label>
    </div>

    <!-- 1b -->
    <div class="question" data-type="openq1b" data-name="q1b">
      <p><strong>1b. Explain your selection in Part A using complete sentences and evidence from the text. (RL.4.2)</strong></p>
      <textarea style="font-size: 36px; color: #333333; font-family: 'Tahoma', sans-serif; width: 100%;" id="openq1b" rows="4" cols="50"></textarea>
    </div>

    <!-- 2a -->
    <div class="question" data-answer="a" data-type="radio" data-name="q2a">
      <p><strong>2a. Select the statement that <u>best</u> describes what kind of city council leader Jasmine’s mother would be if she won the election. (RL.4.1)</strong></p>
      <label for="q2a_a"><input type="radio" name="q2a" value="a" id="q2a_a"> a) Jasmine’s mother would be a caring leader.</label><br>
      <label for="q2a_b"><input type="radio" name="q2a" value="b" id="q2a_b"> b) Jasmine’s mother would be an organized leader.</label><br>
      <label for="q2a_c"><input type="radio" name="q2a" value="c" id="q2a_c"> c) Jasmine’s mother would be an empathetic leader.</label><br>
      <label for="q2a_d"><input type="radio" name="q2a" value="d" id="q2a_d"> d) Jasmine’s mother would be a hardworking leader.</label>
    </div>

    <!-- 2b -->
    <div class="question" data-answer="a" data-type="radio" data-name="q2b">
      <p><strong>2b. What evidence from the story supports your answer? (RL.4.1)</strong></p>
      <label for="q2b_a"><input type="radio" name="q2b" value="a" id="q2b_a"> a) She is a firefighter and has spent her whole life helping others.</label><br>
      <label for="q2b_b"><input type="radio" name="q2b" value="b" id="q2b_b"> b) She has a flier to communicate all the things she plans to work on if she is elected.</label><br>
      <label for="q2b_c"><input type="radio" name="q2b" value="c" id="q2b_c"> c) She has a daughter who will help her.</label><br>
      <label for="q2b_d"><input type="radio" name="q2b" value="d" id="q2b_d"> d) She was working hard to knock on voters' doors to win the election.</label>
    </div>

    <!-- 3a -->
    <div class="question" data-answer="d" data-type="radio" data-name="q3a">
      <p><strong>3a. Choose the sentence below that <u>best summarizes</u> the story. (RL.4.2)</strong></p>
      <label for="q3a_a"><input type="radio" name="q3a" value="a" id="q3a_a"> a) Kyla learns about city councils from her social studies teacher and convinces her mom to run for office. She wins the election.</label><br>
      <label for="q3a_b"><input type="radio" name="q3a" value="b" id="q3a_b"> b) Kyla and her mom canvassed their neighborhood to try and win votes in the election. They convince enough people that she would make a positive impact on their town.</label><br>
      <label for="q3a_c"><input type="radio" name="q3a" value="c" id="q3a_c"> c) The boss at the fire station tells Kyla’s mom that she should run for office. She listens to him so she can make a positive change for her town and she tries to win the election.</label><br>
      <label for="q3a_d"><input type="radio" name="q3a" value="d" id="q3a_d"> d) Kyla’s mom is a firefighter who realizes the way to help make positive changes that her community needs is by running for city council. Kyla helps her mom campaign and she wins the election.</label>
    </div>

    <!-- 3b -->
    <div class="question" data-answer="b,c" data-type="checkbox" data-name="q3b">
      <p><strong>3b. Which <u>TWO</u> pieces of evidence from the passage <u>best</u> support the answer to part 3a? (RL.4.2)</strong></p>
      <label for="q3b_a"><input type="checkbox" name="q3b" value="a" id="q3b_a"> a) She pointed to a map: our district, Ward 6, was in the western part of the city, near the river. “In order to run for your local seat, first you need to get your name on the official ballot.”</label><br>
      <label for="q3b_b"><input type="checkbox" name="q3b" value="b" id="q3b_b"> b) “I’m tired of our concerns being ignored or put off until later. Folks in this town rely on the fire department for help. We need a bridge over the river to help with traffic, and we need to fix the roads.”</label><br>
      <label for="q3b_c"><input type="checkbox" name="q3b" value="c" id="q3b_c"> c) Some supporters were so enthusiastic that they decided to volunteer with our campaign, and suddenly we had a whole team to help us. They went canvassing, too, working to convince our community that my mom would be the best representative.</label><br>
      <label for="q3b_d"><input type="checkbox" name="q3b" value="d" id="q3b_d"> d) We tried our hardest, and we’ve brought our community together. That’s no small thing.” I nodded, but my stomach felt like it was full of butterflies. I knew my mom was right, but I still really wanted her to win.</label><br>
      <label for="q3b_e"><input type="checkbox" name="q3b" value="e" id="q3b_e"> e) My mom shook her head and sighed, “My job is to put out fires, Jasmine, not fix the roads.”</label>
    </div>

    <!-- 4a -->
    <div class="question" data-type="openq4a" data-name="q4a">
      <p><strong>4a. What does the word <em><u>canvassing</u></em> mean in this text? Write your answer in a complete sentence. (RL.4.4)</strong></p>
      <textarea style="font-size: 36px; color: #333333; font-family: 'Tahoma', sans-serif; width: 100%;" id="openq4a" rows="4" cols="50"></textarea>
    </div>

    <!-- 4b -->
    <div class="question" data-answer="b,c" data-type="checkbox" data-name="q4b">
      <p><strong>4b. Select <u>TWO</u> details from the text or picture that helps you understand the meaning of the word <em><u>canvassing</u></em> in paragraph 13? (RL.4.4)</strong></p>
      <label for="q4b_a"><input type="checkbox" name="q4b" value="a" id="q4b_a"> a) “Canvassing worked!”</label><br>
      <label for="q4b_b"><input type="checkbox" name="q4b" value="b" id="q4b_b"> b) “Now we knock on doors.”</label><br>
      <label for="q4b_c"><input type="checkbox" name="q4b" value="c" id="q4b_c"> c) “Some people were helpful and some people just shut their doors on us.”</label><br>
      <label for="q4b_d"><input type="checkbox" name="q4b" value="d" id="q4b_d"> d) “Now that I am getting to know my community, I can see that politics touches everyone.”</label><br>
      <label for="q4b_e"><input type="checkbox" name="q4b" value="e" id="q4b_e"> e) “That’s why it matters to elect someone who cares too.”</label>
    </div>

    <hr class="rounded">
    <p style="text-align: center; font-size: 40px; color: brown;"><b>This is the end of the test.</b></p>
    <p style="text-align: left; font-size: 28px; color: brown;"><em>Make sure that you:</em></p>
    <ul>
      <li style="color: brown;">Check your answers before submitting the test.</li>
      <li style="color: brown;">Type in your <b>name</b> and <b>last name</b> <u>correctly</u></li>
      <li style="color: brown;">Enter <u>your</u> <b>teacher</b>'s name.</li>
    </ul>
    <p style="font-size: 28px; color: brown;"><em>When you are ready, click 'Submit' and your test will be auto-graded.</em></p>

    <hr class="rounded">

    <label>
      <p>
        Name & Last Name (required):
        <input style="width: 400px; height: 45px; padding: 8px; border: 1px solid #ccc; border-radius: 4px; font-family: Georgia, serif; font-size: 24px; color: #030303; background-color: #fcfc03;"
               type="text" id="studentName" name="name" placeholder="Type Your Name Here" required aria-label="Student Name">
      </p>
    </label>

    <label>
      <p>
        Teacher (required):
        <select id="teacherName" name="teacher" required aria-label="Teacher">
          <option value="" disabled selected>Select your teacher</option>
          <option value="Becerril">Becerril</option>
          <option value="Cerwin">Cerwin</option>
          <option value="Diaz">Diaz</option>
        </select>
      </p>
    </label>

    <hr class="rounded">
    <div style="text-align: center;">
      <button type="submit" id="submitBtn">Submit</button>
    </div>
  </form>

  <div id="result" style="margin-top:20px; font-weight:bold;"></div>
</div>

<script>
(() => {
  const form = document.getElementById("quizForm");
  const submitBtn = document.getElementById("submitBtn");
  let isSubmitting = false;

  form.addEventListener("submit", async function(e) {
    e.preventDefault();
    if (isSubmitting) return; // prevent double-clicks

    // Validate name & teacher first
    const studentNameEl = document.getElementById("studentName");
    const teacherNameEl = document.getElementById("teacherName");
    studentNameEl.classList.remove("unanswered");
    teacherNameEl.classList.remove("unanswered");

    if (!studentNameEl.value.trim()) {
      alert("⚠️ Please enter your name.");
      studentNameEl.classList.add("unanswered");
      studentNameEl.scrollIntoView({ behavior: "smooth", block: "center" });
      studentNameEl.focus();
      return;
    }
    if (!teacherNameEl.value) {
      alert("⚠️ Please select your teacher.");
      teacherNameEl.classList.add("unanswered");
      teacherNameEl.scrollIntoView({ behavior: "smooth", block: "center" });
      teacherNameEl.focus();
      return;
    }

    // Clear old highlights
    document.querySelectorAll(".question").forEach(q => {
      q.classList.remove("unanswered", "correct", "incorrect");
    });

    // Pass 1: Validation only
    let score = 0;
    let total = 0;
    let openResponses = [];
    let allAnswered = true;
    let firstUnanswered = null;

    document.querySelectorAll(".question").forEach(q => {
      const type = q.dataset.type;
      const name = q.dataset.name;

      if (type === "radio") {
        total++;
        const chosen = document.querySelector(`input[name="${name}"]:checked`);
        if (!chosen) {
          allAnswered = false;
          q.classList.add("unanswered");
          if (!firstUnanswered) firstUnanswered = q;
        }
      } else if (type === "checkbox") {
        total++;
        const selected = Array.from(document.querySelectorAll(`input[name="${name}"]:checked`));
        if (selected.length !== 2) {
          allAnswered = false;
          q.classList.add("unanswered");
          if (!firstUnanswered) firstUnanswered = q;
        }
      } else {
        const textarea = q.querySelector("textarea");
        if (textarea && textarea.value.trim() === "") {
          allAnswered = false;
          q.classList.add("unanswered");
          if (!firstUnanswered) firstUnanswered = q;
        }
      }
    });

    if (!allAnswered) {
      alert("⚠️ Please answer all questions. (Checkbox questions must have exactly TWO choices.)");
      if (firstUnanswered) {
        firstUnanswered.scrollIntoView({ behavior: "smooth", block: "center" });
      }
      return;
    }

    // Pass 2: Grade & collect
    let detailedAnswers = {};
    document.querySelectorAll(".question").forEach(q => {
      const type = q.dataset.type;
      const correct = q.dataset.answer;
      const name = q.dataset.name;
      let studentAnswer = "";

      if (type === "radio") {
        const chosen = document.querySelector(`input[name="${name}"]:checked`);
        studentAnswer = chosen.value;
        if (chosen.value === correct) {
          score++;
          q.classList.add("correct");
        } else {
          q.classList.add("incorrect");
        }
      } else if (type === "checkbox") {
        const selected = Array.from(document.querySelectorAll(`input[name="${name}"]:checked`)).map(cb => cb.value);
        studentAnswer = selected.join(",");
        const correctAnswers = (correct || "").split(",");
        const isCorrect = selected.length === correctAnswers.length && correctAnswers.every(ans => selected.includes(ans));
        if (isCorrect) {
          score++;
          q.classList.add("correct");
        } else {
          q.classList.add("incorrect");
        }
      } else {
        const textarea = q.querySelector("textarea");
        if (textarea) {
          studentAnswer = textarea.value.trim();
          openResponses.push({ question: q.querySelector("p").innerText, answer: studentAnswer });
          q.classList.add("correct"); // recorded
        }
      }

      detailedAnswers[name] = studentAnswer;
    });

    const percent = Math.round((score / total) * 100);
    const studentName = studentNameEl.value.trim();
    const teacherName = teacherNameEl.value;

    // Display report
    let openHTML = "";
    if (openResponses.length > 0) {
      openHTML = "<h3>Open-Ended Responses</h3><ul>";
      openResponses.forEach(r => {
        openHTML += `<li><strong>${r.question}</strong><br>Response: ${r.answer}</li>`;
      });
      openHTML += "</ul>";
    }

    document.getElementById("result").innerHTML = `
      <h3>Student Report Card</h3>
      <p><strong>Student:</strong> ${studentName}</p>
      <p><strong>Teacher:</strong> ${teacherName}</p>
      <p><strong>Score:</strong> ${score} out of ${total} correct (${percent}%).</p>
      <p><em>Note:</em> Only multiple-choice and checkbox questions are auto-graded.</p>
      ${openHTML}
    `;

    // Prepare payload for Google Sheets
    const payload = { studentName, teacherName, score, percent, ...detailedAnswers };
    const formBody = Object.keys(payload)
      .map(key => encodeURIComponent(key) + "=" + encodeURIComponent(payload[key]))
      .join("&");

    // Lock UI & send
    isSubmitting = true;
    const originalBtnText = submitBtn.textContent;
    submitBtn.disabled = true;
    submitBtn.textContent = "Submitting...";

    try {
      const res = await fetch("https://script.google.com/macros/s/AKfycbz7ujYPH-7VFJ41wMfEwU50Zw1_a_SWt8VzgvTn3uSeksn83Gd2qmgdvM9WqDjy7gxwTw/exec", {
        method: "POST",
        headers: { "Content-Type": "application/x-www-form-urlencoded" },
        body: formBody
      });
      const data = await res.text();
      console.log("Server response:", data);
      submitBtn.textContent = "Submitted ✓"; // keep disabled to prevent resubmission
      alert("Quiz submitted successfully!");
    } catch (err) {
      console.error("Error:", err);
      alert("There was an error submitting your quiz. Please try again.");
      isSubmitting = false;
      submitBtn.disabled = false;
      submitBtn.textContent = originalBtnText;
    }
  });
})();
</script>

</body>
</html>
